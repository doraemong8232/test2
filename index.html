<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>í—¬ë¡œì›”ë“œ ì‚¬ì´íŠ¸</title>
  <link rel="shortcut icon" href="gamilgo1.png" type="image/png" />
  <style>
    :root{
      --ink:#111827; --bg:#ffffff; --brand:#1d4ed8; --muted:#6b7280; --bar:#0ea5e9; --header-h:56px;
      --pill-active:rgba(255,255,255,.16);
    }
    *{box-sizing:border-box; margin:0; padding:0}
    html,body{height:100%}
    body{font-family:system-ui,apple-system,Segoe UI,Roboto,Pretendard,Malgun Gothic,Arial,sans-serif; color:var(--ink); background:var(--bg)}

    /* ===== í—¤ë” ===== */
    header{position:sticky; top:0; z-index:1002; background:var(--bar); box-shadow:0 2px 10px rgba(0,0,0,.06)}
    .nav-wrap{max-width:1080px; margin:0 auto; padding:0 16px; display:flex; align-items:center; gap:12px; min-height:var(--header-h)}
    .brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:#fff; padding:10px 0}
    .brand img{height:32px}
    .brand span{font-weight:700; letter-spacing:.3px}

    .hamburger{margin-left:auto; display:none; border:0; background:transparent; cursor:pointer; width:44px; height:44px; border-radius:10px}
    .hamburger:focus-visible{outline:2px solid #fff; outline-offset:2px}
    .hamburger .bar{display:block; width:24px; height:2px; background:#fff; margin:5px auto}

    .right-slot{display:flex; align-items:center; gap:8px}
    .login-link{display:flex; align-items:center; justify-content:center; width:40px; height:40px; border-radius:10px; text-decoration:none}
    .login-link:focus-visible{outline:2px solid #fff; outline-offset:2px}
    .login-link img{height:24px}

    nav{margin-left:auto}
    .menu,.submenu{list-style:none}
    .menu{display:flex; align-items:center; gap:8px}
    .menu>li{position:relative}
    .menu>li>a{display:inline-flex; align-items:center; gap:6px; color:#fff; text-decoration:none; font-weight:600; padding:10px 12px; border-radius:10px}
    .menu>li>a:hover{background:var(--pill-active)}
    .menu>li>a.active{background:var(--pill-active); color:#fff}

    .submenu{position:absolute; left:0; top:100%; min-width:220px; background:#fff; border-radius:14px; box-shadow:0 10px 30px rgba(2,6,23,.15); overflow:hidden; opacity:0; visibility:hidden; transform:translateY(6px); transition:.18s ease}
    .submenu li a{display:block; color:var(--ink); text-decoration:none; padding:12px 14px; font-weight:500}
    .submenu li a:hover{background:#f3f4f6}
    .menu>li:focus-within>.submenu, .menu>li:hover>.submenu{opacity:1; visibility:visible; transform:translateY(0)}

    /* ===== ë³¸ë¬¸ ===== */
    main{max-width:1080px; margin:24px auto; padding:0 16px}
    .muted{color:var(--muted)}
    .card{border:1px solid #e5e7eb; border-radius:14px; padding:16px; box-shadow:0 4px 14px rgba(2,6,23,.06); background:#fff}

    /* ===== ëª¨ë°”ì¼: ì˜¤ë¥¸ìª½ ë“œë¡œì–´ ===== */
    @media (max-width:900px){
      .hamburger{display:block}
      #primary-nav{
        position:fixed; top:var(--header-h); right:-100%;
        width:80vw; max-width:360px; height:calc(100vh - var(--header-h));
        background:#fff; box-shadow:-10px 0 30px rgba(2,6,23,.18);
        transition:right .25s ease; display:block; overflow-y:auto; z-index:1001; padding:16px 12px 24px;
      }
      #primary-nav.open{right:0}
      .menu{display:flex; flex-direction:column; gap:4px}
      .menu>li>a{color:#111827; background:transparent; display:flex; align-items:center; justify-content:space-between; padding:12px 10px; border-radius:10px; font-weight:700; text-decoration:none}
      .menu>li>a:hover{background:#f3f4f6}
      .menu>li>a.active{background:#e5e7eb; color:#111827}
      .submenu{position:static; opacity:1; visibility:visible; transform:none; background:#f8fafc; border-radius:10px; box-shadow:none; overflow:hidden; display:none; margin:4px 0 10px; padding:6px}
      .submenu.open{display:block}
      .submenu li a{padding:10px 10px; color:#111827; border-radius:8px; text-decoration:none; display:block}
      .submenu li a:hover{background:#eef2ff}
    }

    /* ìœ í‹¸ */
    .row{display:flex; gap:12px; flex-wrap:wrap}
    .btn{border:1px solid #e5e7eb; background:#fff; padding:8px 12px; border-radius:10px; cursor:pointer}
    .btn.primary{background:#1d4ed8; color:#fff; border-color:#1d4ed8}
    .btn.ghost{background:transparent}
    .chips{display:flex; flex-wrap:wrap; gap:8px}
    .chip{padding:6px 10px; border-radius:999px; border:1px solid #e5e7eb; cursor:pointer; user-select:none}
    .chip.active{background:#111827; color:#fff; border-color:#111827}
    table{width:100%; border-collapse:collapse}
    th,td{border-bottom:1px solid #e5e7eb; padding:10px; text-align:left; font-size:14px}
    input[type="text"]{padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; width:100%}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

    /* ê°€ë¡œ ìŠ¤í¬ë¡¤ í•„í„° ë°” */
    .hscroll{display:flex; gap:8px; overflow-x:auto; padding:8px 2px 10px}
    .hscroll::-webkit-scrollbar{height:8px}
    .hscroll::-webkit-scrollbar-thumb{background:#e5e7eb; border-radius:999px}
    .filter-card{border:1px solid #e5e7eb; background:#fff; border-radius:12px; padding:10px}
    .select{padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; background:#fff}
    .label{font-size:12px; color:var(--muted); margin-bottom:6px}

    .login-link img{
    height:40px;   /* ì›í•˜ëŠ” í¬ê¸° */
    width:auto;    /* ë¹„ìœ¨ ìœ ì§€ */
    
    }


  </style>
</head>
<body>
  <!-- ===== í—¤ë” ===== -->
  <header>
    <div class="nav-wrap">
      <a class="brand" href="#/">
        <img src="gamilgo_logo.png" alt="ì‚¬ì´íŠ¸ ë¡œê³ "/>
      </a>

      <button class="hamburger" aria-label="ë©”ë‰´ ì—´ê¸°" aria-expanded="false" aria-controls="primary-nav">
        <span class="bar"></span><span class="bar"></span><span class="bar"></span>
      </button>

      <div class="right-slot">
        <a class="login-link" href="#/login" aria-label="ë¡œê·¸ì¸">
          <img src="login.png" alt="ë¡œê·¸ì¸"/>
        </a>
      </div>

      <nav id="primary-nav" aria-label="ì£¼ ë©”ë‰´">
        <ul class="menu" role="menubar">
          <li role="none"><a role="menuitem" href="#/sogae" data-route="/sogae">ì†Œê°œ</a></li>

          <li role="none">
            <a role="menuitem" aria-haspopup="true" aria-expanded="false" href="#!" data-top>ì•Œë¦¼Â·ì†Œí†µ</a>
            <ul class="submenu" role="menu" aria-label="ì•Œë¦¼Â·ì†Œí†µ í•˜ìœ„ ë©”ë‰´">
              <li role="none"><a role="menuitem" href="#/gongji" data-route="/gongji">ê³µì§€</a></li>
              <li role="none"><a role="menuitem" href="#/suggest" data-route="/suggest">ê±´ì˜í•¨</a></li>
              <li role="none"><a role="menuitem" href="#/event" data-route="/event">SNS ì†Œê°œ</a></li>
            </ul>
          </li>

          <li role="none">
            <a role="menuitem" aria-haspopup="true" aria-expanded="false" href="#!" data-top>í¸ì˜ ì •ë³´</a>
            <ul class="submenu" role="menu" aria-label="í¸ì˜ ì •ë³´ í•˜ìœ„ ë©”ë‰´">
              <li role="none"><a role="menuitem" href="#/search-teacher" data-route="/search-teacher">ì„ ìƒë‹˜ êµë¬´ì‹¤ ê²€ìƒ‰</a></li>
              <li role="none"><a role="menuitem" href="#/search-specialclassroom" data-route="/search-specialclassroom">íŠ¹ë³„ì‹¤ ìœ„ì¹˜ ê²€ìƒ‰</a></li>
              <li role="none"><a role="menuitem" href="#/bunsilmul" data-route="/bunsilmul">ë¶„ì‹¤ë¬¼ í˜„í™©</a></li>
            </ul>
          </li>

          <li role="none">
            <a role="menuitem" aria-haspopup="true" aria-expanded="false" href="#!" data-top>ì§€ì›</a>
            <ul class="submenu" role="menu" aria-label="ì§€ì› í•˜ìœ„ ë©”ë‰´">
              <li role="none"><a role="menuitem" href="#/sharing-calender" data-route="/sharing-calender">í•™ê¸‰ë³„ ì¼ì • ê³µìœ </a></li>
              <li role="none"><a role="menuitem" href="#/recording-study" data-route="/recording-study">ê³µë¶€ ê¸°ë¡</a></li>
            </ul>
          </li>
        </ul>
      </nav>

    </div>
  </header>

  <!-- ===== ë³¸ë¬¸ ì»¨í…Œì´ë„ˆ(ë¼ìš°í„°ê°€ ì´ ì•ˆì— mount) ===== -->
  <main id="app" aria-live="polite" aria-busy="false"></main>

  <script>
    /* ===== ë“œë¡œì–´/ì•„ì½”ë””ì–¸ ìœ ì§€ ===== */
    const hamburger = document.querySelector('.hamburger');
    const nav = document.getElementById('primary-nav');
    const topLinks = document.querySelectorAll('.menu > li > a[data-top]');
    const submenus = document.querySelectorAll('.submenu');
    const isMobile = () => window.matchMedia('(max-width: 900px)').matches;

    function openDrawer(){ nav.classList.add('open'); hamburger.setAttribute('aria-expanded','true'); document.body.style.overflow='hidden'; }
    function closeDrawer(){ nav.classList.remove('open'); hamburger.setAttribute('aria-expanded','false'); document.body.style.overflow=''; submenus.forEach(s=>s.classList.remove('open')); topLinks.forEach(a=>a.setAttribute('aria-expanded','false')); }

    hamburger.addEventListener('click', () => { if(!isMobile()) return; nav.classList.contains('open') ? closeDrawer() : openDrawer(); });
    document.addEventListener('keydown', e => { if(e.key==='Escape' && nav.classList.contains('open')) closeDrawer(); });
    topLinks.forEach(link => {
      link.addEventListener('click', e => {
        if (!isMobile()) return;
        e.preventDefault();
        const panel = link.nextElementSibling;
        if (!panel) return;
        const willOpen = !panel.classList.contains('open');
        submenus.forEach(s => s.classList.remove('open'));
        topLinks.forEach(a => a.setAttribute('aria-expanded','false'));
        if (willOpen){ panel.classList.add('open'); link.setAttribute('aria-expanded','true'); }
      });
    });
    window.addEventListener('resize', () => { if (!isMobile()) closeDrawer(); });
    // ===== ë©”ë‰´ ë°”ê¹¥ í´ë¦­ ì‹œ ë“œë¡œì–´ ë‹«ê¸° =====
    document.addEventListener('click', e => {
    if (!isMobile()) return;                    // ëª¨ë°”ì¼ì¼ ë•Œë§Œ ì‘ë™
    if (!nav.classList.contains('open')) return; // ë“œë¡œì–´ê°€ ì—´ë ¤ ìˆì„ ë•Œë§Œ

    const clickedInsideNav = nav.contains(e.target);          // ë©”ë‰´ ë‚´ë¶€ í´ë¦­
    const clickedHamburger = hamburger.contains(e.target);    // í–„ë²„ê±° ë²„íŠ¼ í´ë¦­
    if (!clickedInsideNav && !clickedHamburger) {
        closeDrawer();  // ë©”ë‰´ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    }
    });


    /* ===== ë¼ìš°í„°: ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ (mount/unmount) ===== */
    const app = document.getElementById('app');
    let currentRoute = null; // { mount, unmount }

    // ìœ í‹¸: í™œì„± ë§í¬ í‘œì‹œ
    function setActiveLink(path){
      document.querySelectorAll('[data-route]').forEach(a => a.classList.remove('active'));
      document.querySelectorAll(`[data-route="${path}"]`).forEach(a => a.classList.add('active'));
    }

    // ---------- ì»´í¬ë„ŒíŠ¸ë“¤ ----------
    const Home = {
      mount(root){
        root.innerHTML = `
          <section class="page">
            <h1>í™˜ì˜í•©ë‹ˆë‹¤ ğŸ‘‹</h1>
            <p class="muted">í•™ìƒíšŒì˜ ê³µì§€ì™€ ì§€ì› ì„œë¹„ìŠ¤ë¥¼ í•œ ê³³ì—ì„œ!</p>
          </section>
        `;
      },
      unmount(){ /* ì—†ìŒ */ }
    };

    // ê³µì§€: í•„í„° + ë™ì  ëª©ë¡
    const Notice = (function(){
      const data = [
        { id:1, type:'ì¼ë°˜', title:'í•™ìƒíšŒ íšŒì˜ ì¼ì • ì•ˆë‚´', date:'2025-10-10' },
        { id:2, type:'ì´ë²¤íŠ¸', title:'ì¶•ì œ í¬ìŠ¤í„° ê³µëª¨ì „', date:'2025-10-18' },
        { id:3, type:'íšŒì˜', title:'9ì›” íšŒì˜ë¡ ê³µê°œ', date:'2025-09-30' },
        { id:4, type:'ì´ë²¤íŠ¸', title:'ë™ì•„ë¦¬ ë°•ëŒíšŒ ë¶€ìŠ¤ ì‹ ì²­', date:'2025-10-20' },
      ];
      let current = 'ì „ì²´';
      let elFilter = null, elList = null;

      function renderList(){
        const list = (current==='ì „ì²´') ? data : data.filter(d=>d.type===current);
        elList.innerHTML = list.map(d => `
          <div class="card" data-id="${d.id}">
            <div class="row" style="justify-content:space-between; align-items:center">
              <strong>${d.title}</strong>
              <span class="muted mono">${d.date}</span>
            </div>
            <div class="muted" style="margin-top:6px">ë¶„ë¥˜: ${d.type}</div>
            <div style="margin-top:10px">
              <button class="btn" data-action="open" data-id="${d.id}">ìƒì„¸ ë³´ê¸°</button>
            </div>
          </div>
        `).join('');
      }

      function onFilterClick(e){
        const btn = e.target.closest('.chip');
        if (!btn) return;
        current = btn.dataset.cat;
        [...elFilter.querySelectorAll('.chip')].forEach(c=>c.classList.toggle('active', c.dataset.cat===current));
        renderList();
      }

      function onListClick(e){
        const btn = e.target.closest('[data-action="open"]');
        if (!btn) return;
        const id = +btn.dataset.id;
        const item = data.find(d=>d.id===id);
        if (!item) return;
        alert(`ğŸ“Œ [${item.type}] ${item.title}\në‚ ì§œ: ${item.date}`);
      }

      return {
        mount(root){
          root.innerHTML = `
            <section class="page">
              <h1>ê³µì§€</h1>
              <p class="muted" style="margin-bottom:10px">ì´ë²¤íŠ¸/í–‰ì‚¬/ì¼ë°˜ ê³µì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
              <div class="chips" id="notice-filter" style="margin-bottom:12px">
                <div class="chip active" data-cat="ì „ì²´">ì „ì²´</div>
                <div class="chip" data-cat="ì¼ë°˜">ì¼ë°˜</div>
                <div class="chip" data-cat="íšŒì˜">íšŒì˜</div>
                <div class="chip" data-cat="ì´ë²¤íŠ¸">ì´ë²¤íŠ¸</div>
              </div>
              <div class="row" id="notice-list" style="flex-direction:column; gap:12px"></div>
            </section>
          `;
          elFilter = root.querySelector('#notice-filter');
          elList = root.querySelector('#notice-list');
          elFilter.addEventListener('click', onFilterClick);
          elList.addEventListener('click', onListClick);
          renderList();
        },
        unmount(){
          if (!elFilter || !elList) return;
          elFilter.removeEventListener('click', onFilterClick);
          elList.removeEventListener('click', onListClick);
          elFilter = elList = null;
        }
      };
    })();

// êµë¬´ì‹¤ ê²€ìƒ‰: [ìœ„] ê°€ë¡œ í•„í„° â†’ [ì•„ë˜] ì´ë¦„ ê²€ìƒ‰ â†’ ê²°ê³¼ í‘œ/ë¶€ì„œì´ë¯¸ì§€ ì „í™˜
const SearchTeacher = (function(){
  const IMG_BASE = ''; // ì˜ˆ: 'img/dept/' ë¡œ ë°”ê¾¸ë©´ 'img/dept/êµë¬´ê¸°íšë¶€.png' í˜•íƒœë¡œ ë¡œë“œë¨

  const SUBJECT_MAIN = ['êµ­ì–´','ì˜ì–´','ìˆ˜í•™','ì‚¬íšŒ','ê³¼í•™','ì˜ˆì²´ëŠ¥','ì •ë³´Â·ê¸°íƒ€','ì œ2ì™¸êµ­ì–´'];
  const SUB_BY_GRADE = {
    1: ['êµ­ì–´','ì˜ì–´','ìˆ˜í•™','í†µí•©ê³¼í•™','í†µí•©ì‚¬íšŒ','í•œêµ­ì‚¬','ë¯¸ìˆ ','ìŒì•…','ì²´ìœ¡','ì •ë³´'],
    2: [
      'ë¬¸í•™','ë…ì„œ','ìˆ˜í•™I','ìˆ˜í•™II','ê¸°í•˜','ì˜ì–´I','ì˜ì–´II','ì˜ì–´ê¶Œ ë¬¸í™”','ìš´ë™ê³¼ ê±´ê°•',
      'ë¬¼ë¦¬I','í™”í•™I','ìƒëª…ê³¼í•™I','ì§€êµ¬ê³¼í•™I','ì •ì¹˜ì™€ ë²•','ìƒí™œê³¼ ìœ¤ë¦¬','ê²½ì œ','ì„¸ê³„ì‚¬','í•œêµ­ì§€ë¦¬',
      'ë¯¸ìˆ  ê°ìƒê³¼ ë¹„í‰','ìŒì•… ê°ìƒê³¼ ë¹„í‰','ì¸ê³µì§€ëŠ¥ ê¸°ì´ˆ','ì¼ë³¸ì–´I','ì¤‘êµ­ì–´I'
    ],
    3: [
      'ìŠ¤í¬ì¸  ìƒí™œ',
      'í™”ë²•ê³¼ ì‘ë¬¸','ì–¸ì–´ì™€ ë§¤ì²´','ë¯¸ì ë¶„','í™•ë¥ ê³¼ í†µê³„','ì˜ì–´ ë…í•´ì™€ ì‘ë¬¸','ì˜ì–´ íšŒí™”',
      'ì‹¬í™”êµ­ì–´','ì‹¬í™”ì˜ì–´','ìˆ˜í•™ê³¼ì œì™€ íƒêµ¬',
      'ë¬¼ë¦¬II','í™”í•™II','ìƒëª…ê³¼í•™II','ì§€êµ¬ê³¼í•™II','ìƒí™œê³¼ ê³¼í•™','ìœ¤ë¦¬ì™€ ì‚¬ìƒ','ì‚¬íšŒ ë¬¸í™”',
      'ë™ì•„ì‹œì•„ì‚¬','ì„¸ê³„ì§€ë¦¬','ì—¬í–‰ì§€ë¦¬','ì‚¬íšŒë¬¸ì œì™€ íƒêµ¬',
      'í”„ë¡œê·¸ë˜ë°','ì¼ë³¸ë¬¸í™”','ì¤‘êµ­ë¬¸í™”','ë³´ê±´','ì‹¬ë¦¬í•™','ë…¼ìˆ ','ì„¸ê³„ì‹œë¯¼'
    ]
  };
  const DETAIL_TO_MAIN = new Map([
    ['ë¬¸í•™','êµ­ì–´'],['ë…ì„œ','êµ­ì–´'],['í™”ë²•ê³¼ ì‘ë¬¸','êµ­ì–´'],['ì–¸ì–´ì™€ ë§¤ì²´','êµ­ì–´'],['ì‹¬í™”êµ­ì–´','êµ­ì–´'],['ë…¼ìˆ ','êµ­ì–´'],
    ['ì˜ì–´I','ì˜ì–´'],['ì˜ì–´II','ì˜ì–´'],['ì˜ì–´ê¶Œ ë¬¸í™”','ì˜ì–´'],['ì˜ì–´ ë…í•´ì™€ ì‘ë¬¸','ì˜ì–´'],['ì˜ì–´ íšŒí™”','ì˜ì–´'],['ì‹¬í™”ì˜ì–´','ì˜ì–´'],
    ['ìˆ˜í•™I','ìˆ˜í•™'],['ìˆ˜í•™II','ìˆ˜í•™'],['ê¸°í•˜','ìˆ˜í•™'],['ë¯¸ì ë¶„','ìˆ˜í•™'],['í™•ë¥ ê³¼ í†µê³„','ìˆ˜í•™'],['ìˆ˜í•™ê³¼ì œì™€ íƒêµ¬','ìˆ˜í•™'],
    ['í†µí•©ê³¼í•™','ê³¼í•™'],['ë¬¼ë¦¬I','ê³¼í•™'],['í™”í•™I','ê³¼í•™'],['ìƒëª…ê³¼í•™I','ê³¼í•™'],['ì§€êµ¬ê³¼í•™I','ê³¼í•™'],
    ['ë¬¼ë¦¬II','ê³¼í•™'],['í™”í•™II','ê³¼í•™'],['ìƒëª…ê³¼í•™II','ê³¼í•™'],['ì§€êµ¬ê³¼í•™II','ê³¼í•™'],['ìƒí™œê³¼ ê³¼í•™','ê³¼í•™'],
    ['í†µí•©ì‚¬íšŒ','ì‚¬íšŒ'],['í•œêµ­ì‚¬','ì‚¬íšŒ'],['ì •ì¹˜ì™€ ë²•','ì‚¬íšŒ'],['ìƒí™œê³¼ ìœ¤ë¦¬','ì‚¬íšŒ'],['ê²½ì œ','ì‚¬íšŒ'],
    ['ì„¸ê³„ì‚¬','ì‚¬íšŒ'],['í•œêµ­ì§€ë¦¬','ì‚¬íšŒ'],['ì‚¬íšŒ ë¬¸í™”','ì‚¬íšŒ'],['ë™ì•„ì‹œì•„ì‚¬','ì‚¬íšŒ'],['ì„¸ê³„ì§€ë¦¬','ì‚¬íšŒ'],
    ['ì—¬í–‰ì§€ë¦¬','ì‚¬íšŒ'],['ì‚¬íšŒë¬¸ì œì™€ íƒêµ¬','ì‚¬íšŒ'],['ì„¸ê³„ì‹œë¯¼','ì‚¬íšŒ'],
    ['ë¯¸ìˆ ','ì˜ˆì²´ëŠ¥'],['ìŒì•…','ì˜ˆì²´ëŠ¥'],['ì²´ìœ¡','ì˜ˆì²´ëŠ¥'],['ìš´ë™ê³¼ ê±´ê°•','ì˜ˆì²´ëŠ¥'],['ìŠ¤í¬ì¸  ìƒí™œ','ì˜ˆì²´ëŠ¥'],
    ['ë¯¸ìˆ  ê°ìƒê³¼ ë¹„í‰','ì˜ˆì²´ëŠ¥'],['ìŒì•… ê°ìƒê³¼ ë¹„í‰','ì˜ˆì²´ëŠ¥'],['ë³´ê±´','ì˜ˆì²´ëŠ¥'],
    ['ì •ë³´','ì •ë³´Â·ê¸°íƒ€'],['í”„ë¡œê·¸ë˜ë°','ì •ë³´Â·ê¸°íƒ€'],['ì¸ê³µì§€ëŠ¥ ê¸°ì´ˆ','ì •ë³´Â·ê¸°íƒ€'],
    ['ì¼ë³¸ì–´I','ì œ2ì™¸êµ­ì–´'],['ì¤‘êµ­ì–´I','ì œ2ì™¸êµ­ì–´'],['ì¼ë³¸ë¬¸í™”','ì œ2ì™¸êµ­ì–´'],['ì¤‘êµ­ë¬¸í™”','ì œ2ì™¸êµ­ì–´'],
  ]);

  // === ì‹¤ì œ ë°ì´í„°ì—ì„œëŠ” deptë¥¼ ì•„ë˜ 12ê°œ ì¤‘ í•˜ë‚˜ë¡œ ì±„ì›Œì¤˜ ===
  // êµë¬´ê¸°íšë¶€, êµìœ¡ì—°êµ¬ë¶€, êµìœ¡ê³¼ì •ë¶€, ì¸ë¬¸ì‚¬íšŒë¶€, ìˆ˜ë¦¬ê³¼í•™ë¶€, êµìœ¡ì •ë³´ë¶€, ìƒí™œì¸ê¶Œë¶€,
  // ì²´ìœ¡ì˜ˆìˆ ì•ˆì „ë¶€, ì§„ë¡œì§„í•™ë¶€, 1í•™ë…„ë¶€, 2í•™ë…„ë¶€, 3í•™ë…„ë¶€
  const teachers = [
    { name:'ê¹€ì§€í›ˆ', main:'ìˆ˜í•™', detail:'ìˆ˜í•™I', grades:[2], room:'ë³¸ê´€ 2ì¸µ 205', dept:'ìˆ˜ë¦¬ê³¼í•™ë¶€' },
    { name:'ì´ìŠ¹ì§„', main:'ìˆ˜í•™', detail:'ê¸°í•˜', grades:[2], room:'ë³¸ê´€ 3ì¸µ 305', dept:'ìˆ˜ë¦¬ê³¼í•™ë¶€' },
    { name:'ë°•ì†Œì—°', main:'ì˜ì–´', detail:'ì˜ì–´I', grades:[2], room:'ì‹ ê´€ 3ì¸µ 312', dept:'ì¸ë¬¸ì‚¬íšŒë¶€' },
    { name:'ê°•ì†Œì›', main:'ì˜ì–´', detail:'ì˜ì–´ ë…í•´ì™€ ì‘ë¬¸', grades:[3], room:'ì‹ ê´€ 2ì¸µ 210', dept:'êµë¬´ê¸°íšë¶€' },
    { name:'ê¹€ì§„ë¯¸', main:'êµ­ì–´', detail:'ë¬¸í•™', grades:[2], room:'ë³¸ê´€ 4ì¸µ 402', dept:'êµìœ¡ì—°êµ¬ë¶€' },
    { name:'ìµœë¯¸í¬', main:'êµ­ì–´', detail:'ì–¸ì–´ì™€ ë§¤ì²´', grades:[3], room:'ë³¸ê´€ 4ì¸µ 404', dept:'ì¸ë¬¸ì‚¬íšŒë¶€' },
    { name:'ì¡°ë¬¸ì˜', main:'ê³¼í•™', detail:'ì§€êµ¬ê³¼í•™I', grades:[2], room:'ë³¸ê´€ 4ì¸µ 402', dept:'ìˆ˜ë¦¬ê³¼í•™ë¶€' },
    { name:'ê¹€ìˆ˜ê²½', main:'ê³¼í•™', detail:'ìƒëª…ê³¼í•™II', grades:[3], room:'ê³¼í•™ì‹¤ 1', dept:'ìˆ˜ë¦¬ê³¼í•™ë¶€' },
    { name:'ì´ì •ì›', main:'ì‚¬íšŒ', detail:'ì„¸ê³„ì‚¬', grades:[2], room:'ë³¸ê´€ 2ì¸µ 207', dept:'ì¸ë¬¸ì‚¬íšŒë¶€' },
    { name:'ê³½ë³´ê·¼', main:'ì •ë³´Â·ê¸°íƒ€', detail:'í”„ë¡œê·¸ë˜ë°', grades:[3], room:'ì»´ì‹¤ 1', dept:'êµìœ¡ì •ë³´ë¶€' },
    { name:'ê¹€ì—°í™”', main:'ì œ2ì™¸êµ­ì–´', detail:'ì¤‘êµ­ì–´I', grades:[2], room:'ì‹ ê´€ 2ì¸µ 206', dept:'ì¸ë¬¸ì‚¬íšŒë¶€' },
  ].map(t=>{
    if (!t.main && DETAIL_TO_MAIN.has(t.detail)) t.main = DETAIL_TO_MAIN.get(t.detail);
    if (t.detail && DETAIL_TO_MAIN.has(t.detail) && t.main!==DETAIL_TO_MAIN.get(t.detail)) {
      t.main = DETAIL_TO_MAIN.get(t.detail);
    }
    return t;
  });

  let elInput=null, elTbody=null;
  let selMain=null, selGrade=null, selDetail=null, selTeacher=null;

  // ê²°ê³¼ ì˜ì—­ 2ì¢…(í‘œ/ì´ë¯¸ì§€)ì„ êµì²´í•˜ê¸° ìœ„í•œ ì»¨í…Œì´ë„ˆ
  let elResultArea=null;

  let state = { q:'', main:'', grade:'', detail:'', teacher:'', detailMode:false, selectedDept:'' };

  function renderTable(){
    const table = document.createElement('table');
    const thead = document.createElement('thead');
    const trh = document.createElement('tr');
    ['ì´ë¦„','ê³¼ëª©','ìœ„ì¹˜','ìœ„ì¹˜ ìì„¸íˆ ë³´ê¸°'].forEach(t=>{
      const th=document.createElement('th'); th.textContent=t; trh.appendChild(th);
    });
    thead.appendChild(trh);
    elTbody = document.createElement('tbody');
    table.append(thead, elTbody);

    // í‘œ ë‚´ìš© ì±„ìš°ê¸°
    renderRows();

    // í´ë¦­ í•¸ë“¤ëŸ¬
    elTbody.addEventListener('click', onTableClick);

    return table;
  }

  function renderImageView(dept, teacherName){
    const wrap = document.createElement('div');
    wrap.style.display='grid';
    wrap.style.gap='12px';

    const back = document.createElement('button');
    back.className='btn';
    back.textContent='â† ëª©ë¡ìœ¼ë¡œ';
    back.addEventListener('click', ()=>{
      state.detailMode = false;
      state.selectedDept = '';
      swapToTable();
    });

    const card = document.createElement('div');
    card.className='card';
    card.style.textAlign='center';

    const caption = document.createElement('div');
    caption.style.margin='4px 0 10px';
    caption.innerHTML = `<strong>${teacherName}</strong> Â· <span class="muted">${dept}</span>`;

    const img = document.createElement('img');
    img.alt = `${dept} ìœ„ì¹˜ ì´ë¯¸ì§€`;
    img.style.maxWidth='100%';
    img.style.height='auto';
    img.style.borderRadius='12px';
    img.style.border='1px solid #e5e7eb';

    // íŒŒì¼ëª…ì— ê³µë°±/í•œê¸€ì´ ìˆìœ¼ë¯€ë¡œ ì¸ì½”ë”©
    const src = IMG_BASE + encodeURIComponent(dept) + '.png';
    img.src = src;

    card.append(caption, img);
    wrap.append(back, card);
    return wrap;
  }

  function swapToImage(dept, teacherName){
    elResultArea.textContent = '';
    elResultArea.appendChild(renderImageView(dept, teacherName));
  }
  function swapToTable(){
    elResultArea.textContent = '';
    elResultArea.appendChild(renderTable());
  }

  function renderRows(){
    let list = [...teachers];
    if (state.q.trim()){
      const kw = state.q.trim();
      list = list.filter(t => t.name.includes(kw));
    }
    if (state.main)   list = list.filter(t => t.main === state.main);
    if (state.grade)  list = list.filter(t => t.grades.includes(+state.grade));
    if (state.detail) list = list.filter(t => t.detail === state.detail);
    if (state.teacher)list = list.filter(t => t.name === state.teacher);

    elTbody.textContent = '';
    for (const t of list){
      const tr = document.createElement('tr');

      const td1 = document.createElement('td'); td1.textContent = t.name;
      const td2 = document.createElement('td'); td2.textContent = `${t.main}${t.detail ? ' Â· '+t.detail : ''}`;
      const td3 = document.createElement('td'); td3.textContent = t.room;

      const td4 = document.createElement('td');
      const btn = document.createElement('button');
      btn.className = 'btn';
      btn.textContent = 'ìœ„ì¹˜ ìì„¸íˆ ë³´ê¸°';
      btn.dataset.action = 'detail';
      btn.dataset.name = t.name;
      btn.dataset.dept = t.dept || '';
      td4.appendChild(btn);

      tr.append(td1, td2, td3, td4);
      elTbody.appendChild(tr);
    }
  }

  function refreshDependentOptions(){
    const g = state.grade ? +state.grade : null;
    let detailPool = new Set();
    if (g){ SUB_BY_GRADE[g].forEach(s=>detailPool.add(s)); }
    else { Object.values(SUB_BY_GRADE).flat().forEach(s=>detailPool.add(s)); }

    if (state.main){
      detailPool = new Set([...detailPool].filter(d => (DETAIL_TO_MAIN.get(d) || guessMain(d)) === state.main));
    }
    fillSelect(selDetail, ['(ì„¸ë¶€ ê³¼ëª© ì „ì²´)', ...[...detailPool].sort()], state.detail);

    let pool = teachers.filter(t=>{
      if (state.main && t.main!==state.main) return false;
      if (state.grade && !t.grades.includes(+state.grade)) return false;
      if (state.detail && t.detail!==state.detail) return false;
      return true;
    }).map(t=>t.name);
    pool = Array.from(new Set(pool)).sort();
    fillSelect(selTeacher, ['(ì„ ìƒë‹˜ ì „ì²´)', ...pool], state.teacher);
  }

  function onInput(e){ state.q = e.target.value; if(!state.detailMode) renderRows(); }
  function onMain(e){ state.main = e.target.value || ''; state.detail=''; state.teacher=''; refreshDependentOptions(); if(!state.detailMode) renderRows(); }
  function onGrade(e){ state.grade = e.target.value || ''; state.detail=''; state.teacher=''; refreshDependentOptions(); if(!state.detailMode) renderRows(); }
  function onDetail(e){ state.detail = e.target.value || ''; state.teacher=''; refreshDependentOptions(); if(!state.detailMode) renderRows(); }
  function onTeacher(e){ state.teacher = e.target.value || ''; if(!state.detailMode) renderRows(); }

  function onTableClick(e){
    const btn = e.target.closest('button[data-action="detail"]');
    if (!btn) return;
    const dept = btn.dataset.dept;
    const name = btn.dataset.name;
    if (!dept){
      alert('ë¶€ì„œ ì •ë³´ê°€ ì—†ëŠ” ì„ ìƒë‹˜ì…ë‹ˆë‹¤.');
      return;
    }
    state.detailMode = true;
    state.selectedDept = dept;
    swapToImage(dept, name);
  }

  function fillSelect(sel, options, current){
    sel.textContent = '';
    for (const label of options){
      const opt = document.createElement('option');
      if (label.startsWith('(') && label.endsWith(')')){ opt.value=''; opt.textContent=label; }
      else { opt.value = label; opt.textContent = label; }
      if (current && current===opt.value) opt.selected = true;
      sel.appendChild(opt);
    }
  }
  function guessMain(detail){
    if (/^ì˜ì–´/.test(detail) || detail==='ì˜ì–´ê¶Œ ë¬¸í™”') return 'ì˜ì–´';
    if (/^ìˆ˜í•™|ë¯¸ì ë¶„|í™•ë¥ ê³¼ í†µê³„|ê¸°í•˜|ìˆ˜í•™ê³¼ì œì™€ íƒêµ¬/.test(detail)) return 'ìˆ˜í•™';
    if (/ë¬¼ë¦¬|í™”í•™|ìƒëª…ê³¼í•™|ì§€êµ¬ê³¼í•™|ìƒí™œê³¼ ê³¼í•™|í†µí•©ê³¼í•™/.test(detail)) return 'ê³¼í•™';
    if (/ì„¸ê³„ì‚¬|í•œêµ­ì‚¬|ì§€ë¦¬|ìœ¤ë¦¬|ì •ì¹˜|ê²½ì œ|ì‚¬íšŒ/.test(detail)) return 'ì‚¬íšŒ';
    if (/ë¯¸ìˆ |ìŒì•…|ì²´ìœ¡|ìŠ¤í¬ì¸ |ìš´ë™|ë³´ê±´/.test(detail)) return 'ì˜ˆì²´ëŠ¥';
    if (/ì¼ë³¸|ì¤‘êµ­/.test(detail)) return 'ì œ2ì™¸êµ­ì–´';
    if (/í”„ë¡œê·¸ë˜ë°|ì¸ê³µì§€ëŠ¥|ì •ë³´/.test(detail)) return 'ì •ë³´Â·ê¸°íƒ€';
    if (/êµ­ì–´|ë¬¸í•™|ë…ì„œ|í™”ë²•|ì–¸ì–´|ì‹¬í™”êµ­ì–´|ë…¼ìˆ /.test(detail)) return 'êµ­ì–´';
    return 'ì •ë³´Â·ê¸°íƒ€';
  }

  return {
    mount(root){
      const section = document.createElement('section');
      section.className = 'page';

      const h1 = document.createElement('h1');
      h1.textContent = 'ì„ ìƒë‹˜ êµë¬´ì‹¤ ê²€ìƒ‰';

      const card = document.createElement('div');
      card.className = 'card';
      card.style.marginTop = '8px';

      // [ìœ„] ê°€ë¡œ ìŠ¤í¬ë¡¤ í•„í„°
      const filterWrap = document.createElement('div'); filterWrap.className='hscroll';

      const mkBox = (labelText)=>{
        const box = document.createElement('div'); box.className='filter-card';
        const lb = document.createElement('div'); lb.className='label'; lb.textContent=labelText;
        const sel = document.createElement('select'); sel.className='select';
        box.append(lb, sel);
        return { box, sel };
      };

      const {box:boxMain, sel:selMainEl} = mkBox('ê³¼ëª© ì„ íƒ(ëŒ€ë¶„ë¥˜)');
      selMain = selMainEl; fillSelect(selMain, ['(ê³¼ëª© ì „ì²´)', ...SUBJECT_MAIN], state.main);

      const {box:boxGrade, sel:selGradeEl} = mkBox('í•™ë…„ ì„ íƒ');
      selGrade = selGradeEl; fillSelect(selGrade, ['(ì „ì²´)','1','2','3'], state.grade);

      const {box:boxDetail, sel:selDetailEl} = mkBox('ì„¸ë¶€ ê³¼ëª© ì„ íƒ');
      selDetail = selDetailEl;

      const {box:boxTeacher, sel:selTeacherEl} = mkBox('ì„ ìƒë‹˜ ì„ íƒ');
      selTeacher = selTeacherEl;

      filterWrap.append(boxMain, boxGrade, boxDetail, boxTeacher);

      // [ì•„ë˜] ì´ë¦„ ê²€ìƒ‰
      const nameWrap = document.createElement('div');
      nameWrap.style.display='grid';
      nameWrap.style.gap='0px';
      nameWrap.style.marginTop='0px';
      const lb = document.createElement('div'); lb.className='label';
      elInput = document.createElement('input');
      elInput.type='text'; elInput.placeholder='ì˜ˆ: ê¹€ì§€í›ˆ';
      nameWrap.append(lb, elInput);

      // ê²°ê³¼ ì˜ì—­(í‘œ/ì´ë¯¸ì§€ ìŠ¤ì™‘)
      elResultArea = document.createElement('div');
      elResultArea.style.marginTop='12px';
      // ì´ˆê¸°ì—ëŠ” í‘œ
      elResultArea.appendChild(renderTable());

      // ì¡°ë¦½
      card.append(filterWrap, nameWrap, elResultArea);
      section.append(h1, card);
      root.appendChild(section);

      // ì´ë²¤íŠ¸
      elInput.addEventListener('input', onInput);
      selMain.addEventListener('change', onMain);
      selGrade.addEventListener('change', onGrade);
      selDetail.addEventListener('change', onDetail);
      selTeacher.addEventListener('change', onTeacher);

      refreshDependentOptions();
    },
    unmount(){
      // ì´ë²¤íŠ¸ í•´ì œ(í‘œê°€ ì´ë¯¸ì§€ë¡œ ë°”ë€Œì—ˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì•ˆì „ ì²´í¬)
      if (elTbody) elTbody.removeEventListener('click', onTableClick);
      if (elInput) elInput.removeEventListener('input', onInput);
      if (selMain) selMain.removeEventListener('change', onMain);
      if (selGrade) selGrade.removeEventListener('change', onGrade);
      if (selDetail) selDetail.removeEventListener('change', onDetail);
      if (selTeacher) selTeacher.removeEventListener('change', onTeacher);

      elInput=elTbody=selMain=selGrade=selDetail=selTeacher=elResultArea=null;
      state = { q:'', main:'', grade:'', detail:'', teacher:'', detailMode:false, selectedDept:'' };
    }
  };
})();




    // ê³µë¶€ ê¸°ë¡: íƒ€ì´ë¨¸ (unmount ë•Œ ì¸í„°ë²Œ í•´ì œ)
    const StudyTimer = (function(){
      let interval = null, seconds = 0;
      let elTime=null, elStart=null, elStop=null, elReset=null;

      function fmt(s){
        const h = String(Math.floor(s/3600)).padStart(2,'0');
        const m = String(Math.floor((s%3600)/60)).padStart(2,'0');
        const ss= String(s%60).padStart(2,'0');
        return `${h}:${m}:${ss}`;
      }
      function tick(){
        seconds++; if (elTime) elTime.textContent = fmt(seconds);
      }
      function onStart(){
        if (interval) return;
        interval = setInterval(tick, 1000);
        elStart.disabled = true; elStop.disabled = false;
      }
      function onStop(){
        if (!interval) return;
        clearInterval(interval); interval=null;
        elStart.disabled = false; elStop.disabled = true;
      }
      function onReset(){
        seconds = 0; if (elTime) elTime.textContent = fmt(seconds);
      }

      return {
        mount(root){
          root.innerHTML = `
            <section class="page">
              <h1>ê³µë¶€ ê¸°ë¡</h1>
              <div class="card" style="margin-top:8px; display:flex; flex-direction:column; gap:12px; align-items:flex-start">
                <div class="mono" id="time" style="font-size:28px">00:00:00</div>
                <div class="row">
                  <button class="btn primary" id="start">ì‹œì‘</button>
                  <button class="btn" id="stop" disabled>ì¼ì‹œì •ì§€</button>
                  <button class="btn ghost" id="reset">ë¦¬ì…‹</button>
                </div>
                <p class="muted" style="margin-top:4px">â€» í˜ì´ì§€ ì´ë™ ì‹œ íƒ€ì´ë¨¸ëŠ” ìë™ìœ¼ë¡œ ì¼ì‹œì •ì§€ë©ë‹ˆë‹¤.</p>
              </div>
            </section>
          `;
          elTime = root.querySelector('#time');
          elStart = root.querySelector('#start');
          elStop  = root.querySelector('#stop');
          elReset = root.querySelector('#reset');
          elStart.addEventListener('click', onStart);
          elStop.addEventListener('click', onStop);
          elReset.addEventListener('click', onReset);
        },
        unmount(){
          // ì¸í„°ë²Œ/ë¦¬ìŠ¤ë„ˆ ì •ë¦¬
          if (interval){ clearInterval(interval); interval=null; }
          if (elStart) elStart.removeEventListener('click', onStart);
          if (elStop)  elStop.removeEventListener('click', onStop);
          if (elReset) elReset.removeEventListener('click', onReset);
          elTime=elStart=elStop=elReset=null;
        }
      };
    })();

    const SimplePage = (title, text) => ({
      mount(root){
        root.innerHTML = `
          <section class="page">
            <h1>${title}</h1>
            <p class="muted">${text}</p>
          </section>
        `;
      },
      unmount(){}
    });

    // ---------- ë¼ìš°íŠ¸ í…Œì´ë¸” ----------
    const routes = {
      '/': Home,
      '/sogae': SimplePage('ì‚¬ì´íŠ¸ ì†Œê°œ','ì´ ì›¹ì‚¬ì´íŠ¸ëŠ” í•™ìƒíšŒì˜ ê³µì§€, í¸ì˜ ì •ë³´, ì§€ì› ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.'),
      '/gongji': Notice,
      '/suggest': SimplePage('ê±´ì˜í•¨','í•™ìƒ ì˜ê²¬ì„ ìˆ˜ì§‘í•©ë‹ˆë‹¤. (ë¡œê·¸ì¸ í›„ ì œì¶œ)'),
      '/event': SimplePage('SNS ì†Œê°œ','ì¸ìŠ¤íƒ€ê·¸ë¨/ì»¤ë®¤ë‹ˆí‹° ë“±ì˜ ê³µì‹ ì±„ë„ì„ ì†Œê°œí•©ë‹ˆë‹¤.'),
      '/search-teacher': SearchTeacher,
      '/search-specialclassroom': SimplePage('íŠ¹ë³„ì‹¤ ìœ„ì¹˜ ê²€ìƒ‰','ê³¼í•™ì‹¤, ìŒì•…ì‹¤ ë“± ìœ„ì¹˜ ì•ˆë‚´ë¥¼ ì œê³µí•  ì˜ˆì •ì…ë‹ˆë‹¤.'),
      '/bunsilmul': SimplePage('ë¶„ì‹¤ë¬¼ í˜„í™©','ì‚¬ì§„/ë³´ê´€ì¥ì†Œ/ìˆ˜ë ¹ ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.'),
      '/sharing-calender': SimplePage('í•™ê¸‰ë³„ ì¼ì • ê³µìœ ','ìº˜ë¦°ë” ì„ë² ë“œ ë˜ëŠ” ìì²´ ì¼ì • ë³´ë“œë¥¼ ì œê³µí•  ì˜ˆì •ì…ë‹ˆë‹¤.'),
      '/recording-study': StudyTimer,
      '/login': SimplePage('ë¡œê·¸ì¸','ì—¬ê¸°ì— ë¡œê·¸ì¸ í¼ ë˜ëŠ” SSO ë²„íŠ¼ì„ ë°°ì¹˜í•©ë‹ˆë‹¤.'),
    };

    // ---------- ë¼ìš°í„° ----------
    function getPath(){
      const raw = location.hash.replace(/^#/, '');
      return raw || '/';
    }

    function render(){
      const path = getPath();
      const next = routes[path];

      // ì´ì „ ë¼ìš°íŠ¸ ì •ë¦¬
      if (currentRoute && typeof currentRoute.unmount === 'function'){
        currentRoute.unmount();
      }

      // ìƒˆ ë¼ìš°íŠ¸ ë Œë”
      app.setAttribute('aria-busy','true');
      app.innerHTML = ''; // ì»¨í…Œì´ë„ˆ ë¹„ìš°ê³ 
      const mountTarget = document.createElement('div');
      app.appendChild(mountTarget);
      if (next && typeof next.mount === 'function'){
        next.mount(mountTarget);
        currentRoute = next;
      } else {
        // 404
        mountTarget.innerHTML = `
          <section class="page">
            <h1>í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš” ğŸ˜¢</h1>
            <p class="muted"><a href="#/">í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a></p>
          </section>
        `;
        currentRoute = null;
        document.title = `404 Â· í—¬ë¡œì›”ë“œ í•™ìƒíšŒ`;
      }
      app.setAttribute('aria-busy','false');

      // í™œì„± ë§í¬ í‘œì‹œ
      setActiveLink(path);

      // ëª¨ë°”ì¼ì´ë©´ ë“œë¡œì–´ ë‹«ê³  ë§¨ ìœ„ë¡œ
      if (isMobile()) closeDrawer();
      window.scrollTo({ top: 0, behavior: 'instant' });
    }

    window.addEventListener('hashchange', render);
    window.addEventListener('DOMContentLoaded', render);
  </script>
</body>
</html>
